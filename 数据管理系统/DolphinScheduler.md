# DolphinScheduler
- 简介
    - Apache DolphinScheduler 是一个分布式易扩展的可视化DAG工作流任务调度开源系统。适用于企业级场景，提供了一个可视化操作任务、工作流和全生命周期数据处理过程的解决方案 
- 名词解释
    - DAG： 全称 Directed Acyclic Graph，简称 DAG。工作流中的 Task 任务以有向无环图的形式组装起来，从入度为零的节点进行拓扑遍历，直到无后继节点为止
    - 的
- spark
    - 不在集群时：可以当作接口机，只要配置对spark，hadoop环境，能访问到hdfs和提交spark程序
        - 提交spark-jar包，配置spark参数，直接使用ds进行调度
        - 需要解决网络通信，权限的问题
        - 考虑一个ds节点和集群是否在同一个机房的问题，否则可能有网络通信的问题
    - 方便的情况下：在集群中，配置通用，会方便使用，自己维护的情况下会比较麻烦
    - 部分公司会在开源的版本上二次开发，添加一些功能，如限制资源的提交

- 资源中心
    - jar包
    - UDF-好像只支持hive
- 数据源中心
    - 配置数据库连接
    - 对于ck，其实百万级别的数据量计算是可以接受的
- 安全中心
    - 租户：与linux的用户相对应
    - 管理员用户
    - 普通用户（建立项目默认使用）
    - worker用户组：选择在哪个节点上执行，由ds进行调度，日志由ds管理，jar包提交到ds上
    - 队列管理：和yarn对应
- 工作流
    - 创建工作流
        - 参数设置
            - 节点名称，描述，脚本
            - 运行标志
            - 任务优先级
            - 超时告警（非必要）
            - 资源
            - 自定义参数
        - 任务间的依赖关系
            - 并行
            - 串行
            - 实时任务--虚线，跳过执行
        - 保存
            - 执行策略
            - 并行：如果对于同一个工作流定义，同时有多个工作流实例，则并行执行工作流实例。
            - 串行等待：如果对于同一个工作流定义，同时有多个工作流实例，则串行执行工作流实例。
            - 串行抛弃：如果对于同一个工作流定义，同时有多个工作流实例，则抛弃后生成的工作流实例并杀掉正在跑的实例。
            - 串行优先：如果对于同一个工作流定义，同时有多个工作流实例，则按照优先级串行执行工作流实例。
        - 工作流定义，操作功能
            -  编辑： 只能编辑"下线"的工作流定义。工作流DAG编辑同创建工作流定义。
            - 上线： 工作流状态为"下线"时，上线工作流，只有"上线"状态的工作流能运行，但不能编辑。
            - 下线： 工作流状态为"上线"时，下线工作流，下线状态的工作流可以编辑，但不能运行。
            - 运行： 只有上线的工作流能运行。运行操作步骤见运行工作流
            - 定时： 只有上线的工作流能设置定时，系统自动定时调度工作流运行。创建定时后的状态为"下线"，需在定时管理页面上线定时才生效。定时操作步骤见工作流定时
            - 定时管理： 定时管理页面可编辑、上线/下线、删除定时。
            - 删除： 删除工作流定义。在同一个项目中，只能删除自己创建的工作流定义，其他用户的工作流定义不能进行删除，如果需要删除请联系创建用户或者管理员。
            - 下载： 下载工作流定义到本地。
            - 树形图： 以树形结构展示任务节点的类型及任务状态，如下图所示：
        - 定时
            - crontab 
        - 实现服务/程序完成后间隔重启
            - 前置任务——判断任务是否启动——后置是否启动程序 + crontab
                - 日志分实例，方便监控管理
            - 利用失败重启的机制
