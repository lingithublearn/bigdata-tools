

# 1. 架构和历史
- 支持数据仓库，内同缩影和部署软件，高可用的冗余系统，在线事务处理系统（OLTP）
- 存储引擎架构，将查询处理及其他系统任务，和数据的存储/提取相分离
## mysql逻辑框架
- 分层
  - 网络客户端/服务器的工具：连接处理，授权认证，安全
  - 查询解析，分析，优化，缓存以及所有的内置函数
  - 存储引擎: 数据的存储和提取
- 连接管理与安全性
  - 客户端连接，拥有一个线程。
  - 安全认证，使用安全套接字（SSL）
- 优化与执行
  - 解析查询，创建内部数据结构，进行优化

## 并发控制
- 服务器层，存储引擎层
- 读写锁
  - 共享锁/读锁：互相不阻塞
  - 排他锁/写锁：一个写锁回阻塞其他的写锁和读锁
- 锁粒度
  - 锁消耗资源，有相应的开销
  - 锁策略，锁粒度
  - 表锁：开销最小
  - 行级锁：最大程度的支持并发处理，锁开销大

## 事务
- 一组原子性的SQL查询，独立的工作单元。要么全部执行，要么全部执行失败
- ACID ：原子性，一致性，隔离性，持久性
- 隔离级别
  - read uncommitted 未提交读：可以读取到未提交的数据，脏读
  - read commited 提交读：提交后，才可以读：不可重复读，可能回得到不一样的结果
  - repeatable read 可重复读：同一个事务重，多次读取的结果是一样的：
  - serializable：可串行化：解决了幻读
- 死锁
  - 多个事务，以不同的顺序锁定资源，产生恶性循环，产生死锁
  -  死锁检测，死锁超时机制
-  事务日志
- mysql的事务
  - 自动提交
  - 在事务重混合使用存储引擎
  - 隐式和显示锁定

## 多版本并发控制 （MVVC）
- 行级锁的变种
- 通过每行记录后面保存亮哥隐藏的列来实现，一个保存了行的创建时间，一个保存行的过期时间：系统版本号

## 存储引擎
- show table status like ''
- InnoDB引擎
  - 使用MVVC
  - 聚簇索引
- MyISAM引擎
  - 不支持事务和行级锁
  - 加锁，并发，修复，索引特性
  - 压缩表
- 其他存储引擎
  - archive引擎
  - blackhole引擎
  - csv引擎
  - federated引擎
  - memory引擎
  - merge引擎
  - ndb集群引擎
- 第三方
  - OLTP引擎
  - 面向列的存储引擎
  - 社区存储引擎
- 引擎选择
  - 事务支持
  - 备份
  - 崩溃恢复
  - 稀有的特性
- 转换表引擎
## mysql时间线
- 5.1 之后用了InnoDB plugin

## mysql的开发模式

# 2. MYSQL基准测试

- 为什么要基准测试
- 基准测试的策略
  - 集成式
  - 单组件式
  - 指标
    - 吞吐量
    - 响应时间或者延迟
    - 并发性
    - 可扩展性
- 基准测试方法
- 基准测试工具
- 基准测试案例


# 3. 服务器性能剖析

## 性能优化简介











